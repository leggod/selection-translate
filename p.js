(()=>{"use strict";var e,t={451:(e,t,n)=>{n.d(t,{iNe:()=>p,Pyr:()=>v,rr$:()=>E,ur0:()=>g,KtJ:()=>b,znr:()=>x,lnC:()=>w,brc:()=>y,IRm:()=>k,QhV:()=>O,oUC:()=>L,HC1:()=>N,yZ9:()=>C,gSV:()=>T,ZOf:()=>R,J4_:()=>S,Csj:()=>P,cO4:()=>z,GjQ:()=>M,T5o:()=>_,IYJ:()=>B,q01:()=>A,ZoI:()=>I,tsZ:()=>U,ILo:()=>Z,EpL:()=>W,RfN:()=>H,TUJ:()=>F,scP:()=>j,yW8:()=>G,Eye:()=>K,AFY:()=>$,H$A:()=>J,ntJ:()=>q,dah:()=>Y,rtP:()=>D,O4S:()=>X,hPX:()=>V,RP2:()=>Q,cPG:()=>ee,jxF:()=>te,p5I:()=>ne,eHu:()=>ae,BgB:()=>re,HcK:()=>le,YuG:()=>ie,ySA:()=>oe,NdO:()=>ce,M4x:()=>se,KZz:()=>ue,U4W:()=>me,GPh:()=>de,skh:()=>pe,URx:()=>he,Bzc:()=>fe,P1s:()=>ve,GdN:()=>Ee,RjW:()=>ge,Ysf:()=>be,QX7:()=>xe,v8x:()=>we,XaB:()=>ye,G07:()=>ke,mCh:()=>Oe,_4w:()=>Le,iEm:()=>Ne,nvt:()=>Ce,bkT:()=>Te,Cr2:()=>Re,D2c:()=>Se,mHA:()=>Pe,u$T:()=>ze,YHb:()=>Me,oPt:()=>_e,Hpx:()=>Be,ZA9:()=>Ae,WLz:()=>Ie,abV:()=>Ue,TwV:()=>Ze,EOg:()=>We,YbB:()=>He,aSe:()=>Fe,KrR:()=>je,cDM:()=>Ge,Lf7:()=>Ke,qEr:()=>$e,otd:()=>Je,KpW:()=>qe,cHF:()=>Ye,LiQ:()=>De,Wmm:()=>Xe,wGP:()=>Ve,Fcr:()=>Qe,_Kv:()=>et,sfD:()=>tt,NL3:()=>nt});var a,r,l,i,o=n(1229),c=n(762),s=n(2609),u=n(3766),m=n(4155),d="bp3";void 0!==m&&(d=null!==(i=null!==(r=null===(a=m.env)||void 0===a?void 0:a.BLUEPRINT_NAMESPACE)&&void 0!==r?r:null===(l=m.env)||void 0===l?void 0:l.REACT_APP_BLUEPRINT_NAMESPACE)&&void 0!==i?i:d);var p=d+"-active",h=d+"-align-left",f=d+"-align-right",v=d+"-dark",E=d+"-disabled",g=d+"-fill",b=d+"-inline",x=d+"-interactive",w=d+"-large",y=d+"-loading",k=d+"-minimal",O=d+"-outlined",L=d+"-round",N=d+"-small",C=d+"-vertical",T=(at(u.Ly.TOP),at(u.Ly.BOTTOM),at(u.Ly.LEFT),at(u.Ly.RIGHT),et(c.u.ZERO),et(c.u.ONE),et(c.u.TWO),et(c.u.THREE),et(c.u.FOUR),nt(s.S.PRIMARY)),R=(nt(s.S.SUCCESS),nt(s.S.WARNING),nt(s.S.DANGER),d+"-focus-disabled"),S=d+"-text-overflow-ellipsis",P=d+"-blockquote",z=d+"-code",M=d+"-code-block",_=d+"-heading",B=d+"-list",A=d+"-button",I=A+"-group",U=A+"-spinner",Z=A+"-text",W=d+"-callout",H=W+"-icon",F=d+"-card",j=d+"-collapse",G=j+"-body",K=d+"-dialog",$=K+"-container",J=K+"-close-button",q=K+"-header",Y=d+"-divider",D=d+"-html-select",X=d+"-input",V=X+"-group",Q=X+"-left-container",ee=X+"-action",te=d+"-control",ne=te+"-indicator",ae=ne+"-child",re=d+"-checkbox",le=d+"-radio",ie=d+"-switch",oe=ie+"-inner-text",ce=d+"-file-input",se=d+"-file-input-has-selection",ue=d+"-file-upload-input",me=d+"-file-upload-input-custom-text",de=d+"-label",pe=d+"-menu",he=pe+"-item",fe=he+"-label",ve=d+"-submenu",Ee=pe+"-divider",ge=pe+"-header",be=d+"-non-ideal-state",xe=be+"-visual",we=d+"-overlay",ye=we+"-backdrop",ke=we+"-content",Oe=we+"-inline",Le=we+"-open",Ne=we+"-scroll-container",Ce=we+"-start-focus-trap",Te=we+"-end-focus-trap",Re=d+"-popover",Se=Re+"-arrow",Pe=Re+"-backdrop",ze=Re+"-capturing-dismiss",Me=Re+"-content",_e=Re+"-dismiss",Be=_e+"-override",Ae=Re+"-open",Ie=Re+"-out-of-boundaries",Ue=Re+"-target",Ze=Re+"-wrapper",We=d+"-transition-container",He=d+"-portal",Fe=d+"-spinner",je=Fe+"-animation",Ge=Fe+"-head",Ke=d+"-no-spin",$e=Fe+"-track",Je=d+"-toast",qe=Je+"-container",Ye=Je+"-message",De=d+"-tooltip",Xe=d+"-icon";function Ve(){return d}function Qe(e){switch(e){case o.v.LEFT:return h;case o.v.RIGHT:return f;default:return}}function et(e){if(void 0!==e)return d+"-elevation-"+e}function tt(e){if(null!=e)return 0===e.indexOf(d+"-icon-")?e:d+"-icon-"+e}function nt(e){if(null!=e&&e!==s.S.NONE)return d+"-intent-"+e.toLowerCase()}function at(e){if(void 0!==e)return d+"-position-"+e}},9833:(e,t,n)=>{n.d(t,{i:()=>m});var a=n(2100),r=n(4184),l=n.n(r),i=n(7294),o=n(6871),c=n(5307),s=n(451),u=n(2778),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.tagName,r=void 0===n?"div":n,o=(0,a._T)(e,["className","tagName"]),c=l()(s.dah,t);return i.createElement(r,(0,a.pi)((0,a.pi)({},o),{className:c}))},t.displayName=u.g+".Divider",t=(0,a.gn)([o.polyfill],t)}(c.U)},8587:(e,t,n)=>{n.d(t,{H4:()=>s,H5:()=>u,H6:()=>m,EK:()=>d,OL:()=>p});var a=n(2100),r=n(4184),l=n.n(r),i=n(7294),o=n(451);function c(e,t){return function(n){var r=n.className,o=n.elementRef,c=(0,a._T)(n,["className","elementRef"]);return i.createElement(e,(0,a.pi)((0,a.pi)({},c),{className:l()(t,r),ref:o}))}}c("h1",o.T5o),c("h2",o.T5o),c("h3",o.T5o);var s=c("h4",o.T5o),u=c("h5",o.T5o),m=c("h6",o.T5o),d=(c("blockquote",o.Csj),c("code",o.cO4)),p=(c("pre",o.GjQ),c("label",o.GPh),c("ol",o.IYJ));c("ul",o.IYJ)},966:(e,t,n)=>{n.d(t,{AN:()=>a.A,zx:()=>a.z,UW:()=>r.U,Zb:()=>l.Z,UO:()=>i.U,Vq:()=>o.V,iz:()=>c.i,XZ:()=>s.XZ,Y8:()=>s.Y8,S2:()=>u.S,BZ:()=>m.B,Ee:()=>d.E,Kx:()=>p.K,EK:()=>h.EK,H5:()=>h.H5,H6:()=>h.H6,OL:()=>h.OL,Lu:()=>f.L,JO:()=>v.I,v2:()=>E.v,sN:()=>g.s,tR:()=>b.t,J2:()=>x.J,x7:()=>w.x,u:()=>y.u});n(2435);var a=n(4366),r=n(8074),l=n(4971),i=n(1009),o=n(9685),c=n(9833),s=n(312),u=n(696),m=n(8718),d=n(1859),p=n(9161),h=n(8587),f=n(8845),v=n(1679),E=n(2771),g=n(294),b=n(7535),x=n(5185),w=n(7571),y=n(362)},985:(e,t,n)=>{n.d(t,{eE:()=>i,XO:()=>o,un:()=>c,vU:()=>s});var a=n(3150),r=n.n(a);const l=window.navigator.userAgent,i=l.includes("Mac"),o=l.includes("Chrome"),c=l.includes("Edg"),s=l.includes("Firefox");function u(e){return e.split(".").map((e=>Number(e)))}u(r().runtime.getManifest().version)},3230:(e,t,n)=>{var a=n(7294),r=n(3935),l=n(3150),i=n.n(l),o=n(1515),c=n(5744),s=n(966);async function u(){return(await i().tabs.query({active:!0,highlighted:!0,windowId:i().windows.WINDOW_ID_CURRENT}))[0]}var m=n(9970),d=n(1922);function p(e){return`${e.host}${e.path}`}function h(e){const t=e.match(/^(([^:]+):\/\/)?([^/]+)?(\/.*)?$/);if(!t)return;let n=t[3]||"";const a=n.indexOf(":");a>=0&&(n=n.slice(0,a));let r=t[4]||"";const l=r.indexOf("#");if(l>=0&&(r=r.slice(0,l)),!n.startsWith(".")){if(!r){if(!n)return;r="/"}return{host:n,path:r}}}function f(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".*").replace(/^\.\*\\\./,"(.*\\.)?")+"$").test(t)}function v(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(t)}function E(e,t,n){let a,r;a="string"==typeof e?h(e):e;let l=!1,i=!1;if(a){const e=e=>{const t=function(e,t){let n;if(n="string"==typeof t?h(t):t,n)return f(e.host,n.host)&&v(e.path,n.path)}(e,a);return t&&(r=e),t};l=n.some(e),l||(i=t.some(e))}return{urlParts:a,matchedRule:r,whiteListMatched:l,blackListMatched:i}}var g=n(7643),b=n(4648);const x=i().runtime.getURL("/pdf-viewer/web/viewer.html");(0,o.Z)(m.q,["pdfStandalone"]);var w=n(985);const y=s.x7.create();async function k(e){var t;const n=null===(t=await u())||void 0===t?void 0:t.id;if(n)try{await i().tabs.sendMessage(n,e),window.close()}catch(e){y.show({message:a.createElement(a.Fragment,null,"当前页面无法使用此功能。",a.createElement("a",{href:"https://hcfy.app/docs/faq/#why-can-not-use-in-store",target:"_blank",rel:"noreferrer noopener"},"查看帮助")),intent:"warning"})}else y.show({message:"开启功能时发生了一个错误，请稍后重试。",intent:"warning"})}function O(){return a.createElement(a.Fragment,null,a.createElement(s.zx,{icon:"cut",small:!0,onClick:()=>{k("screenshot translate")},text:"截图翻译",style:{marginBottom:10}}),a.createElement(s.zx,{icon:"translate",small:!0,onClick:()=>{k("page translate")},text:"网页全文翻译",style:{marginBottom:10}}))}var L=n(7290);c.$.onlyShowFocusOnTabs();const N=i().runtime.getURL("/")+"settings.html",C=i().runtime.getURL("/")+"settings.html#/cross",T=(0,o.Z)(m.q,["domainBlackList","domainWhiteList"]),R=w.XO?w.un?"Microsoft Edge":"Chrome":"";function S(){var e,t;const[n,r]=(0,a.useState)(),[l,o]=(0,d.Z)(T),[c,m]=(0,a.useState)(),[h,f]=(0,a.useState)(!1),v=(e,t)=>{o((n=>{const a=n[t],r=a.findIndex((t=>t.host===e.host&&t.path===e.path));r>=0&&a.splice(r,1)}))},g=(e,t)=>{o((n=>{n[t].push(e)}))};(0,a.useEffect)((()=>{(async function(e){var t;try{let t;if(t=void 0===e?(await i().tabs.executeScript({code:"window.location.href",runAt:"document_start"}))[0]:(await i().tabs.executeScript(e,{code:"window.location.href",runAt:"document_start"}))[0],t.startsWith("moz-extension"))throw new Error;return t}catch(n){if(void 0===e&&!(e=null===(t=await u())||void 0===t?void 0:t.id))return;try{return await i().tabs.sendMessage(e,"get tab url")}catch(e){}}})().then(r)}),[]),(0,a.useEffect)((()=>{m(l&&n?E(n,l.domainBlackList,l.domainWhiteList):void 0)}),[l,n]);const b=(0,a.useMemo)((()=>!!n&&function(e){return e.startsWith(x)}(n)),[n]),w=null==c?void 0:c.matchedRule,y=(null===(e=null==c?void 0:c.urlParts)||void 0===e?void 0:e.host)||"",k=(null===(t=null==c?void 0:c.urlParts)||void 0===t?void 0:t.path)||"",O=b||c&&c.whiteListMatched||c&&!c.matchedRule?"启用":"禁用",L=null==l?void 0:l.domainBlackList.some((e=>"*"===e.host&&"/*"===e.path));return a.createElement("div",{style:{padding:"8px 8px 0 8px"}},a.createElement(s.zx,{onClick:()=>{f((e=>!e))},fill:!0,text:"禁用"===O&&L&&c?"已在所有网站中禁用网页划词":"此页面已"+O+"网页划词",rightIcon:a.createElement(s.JO,{icon:h?"chevron-up":"chevron-down",iconSize:12}),minimal:!0,small:!0}),a.createElement(s.UO,{isOpen:h},!c&&a.createElement("span",{className:"bp3-text-muted bp3-text-small"},"在少数特殊的页面中，只能使用划词后在右键菜单中选择“翻译这段文本”的翻译方式。如果你刚安装完划词翻译或划词翻译被浏览器自动更新了，那么你可以刷新当前页面后重试。",a.createElement("a",{href:"https://hcfy.app/docs/faq/#why-can-not-use-in-store",target:"_blank",rel:"noreferrer noopener"},"查看帮助")),b&&a.createElement("span",{className:"bp3-text-muted bp3-text-small"},"在划词翻译内置的 PDF 阅读器中，网页划词功能始终可用。"),c&&!b&&a.createElement(a.Fragment,null,a.createElement("div",{style:{marginTop:"4px",marginBottom:"10px"}},a.createElement("div",null,"当前网站：",y),a.createElement("div",null,"当前页面：",k)),c.whiteListMatched&&w&&a.createElement("div",null,a.createElement("p",{className:"bp3-text-muted bp3-text-small"},"此网址命中了白名单规则 ",a.createElement(s.EK,null,p(w)),"。"),a.createElement("p",null,a.createElement(s.zx,{fill:!0,small:!0,onClick:()=>v(w,"domainWhiteList")},"删除命中的规则"))),!c.whiteListMatched&&c.blackListMatched&&w&&a.createElement("div",null,a.createElement("p",{className:"bp3-text-muted bp3-text-small"},L?"你已经在所有网站中禁用了网页划词":a.createElement(a.Fragment,null,"此网址命中了黑名单规则"," ",a.createElement(s.EK,null,p(w))),"，但你仍然可以使用",a.createElement("a",{href:N,target:"_blank",rel:"noreferrer"},"快捷键"),"、",a.createElement("a",{href:C,target:"_blank",rel:"noreferrer"},"辅助键"),"和右键菜单的方式获取翻译结果。"),a.createElement("p",{className:"url-actions"},a.createElement(s.zx,{small:!0,onClick:()=>g({host:y,path:"/*"},"domainWhiteList")},"在当前网站中启用"),a.createElement(s.zx,{small:!0,onClick:()=>g({host:y,path:k},"domainWhiteList")},"在当前页面中启用")),a.createElement("p",null,a.createElement(s.zx,{fill:!0,small:!0,onClick:()=>v(L?{host:"*",path:"/*"}:w,"domainBlackList")},L?"重新启用网页划词":"删除命中的规则"))),!c.whiteListMatched&&!c.blackListMatched&&a.createElement("div",null,a.createElement("p",{className:"bp3-text-muted bp3-text-small"},"此网址没有命中任何规则。"),a.createElement("p",{className:"url-actions"},a.createElement(s.zx,{small:!0,onClick:()=>g({host:y,path:"/*"},"domainBlackList")},"在当前网站中禁用"),a.createElement(s.zx,{small:!0,onClick:()=>g({host:y,path:k},"domainBlackList")},"在当前页面中禁用")))),c&&!L&&!b&&a.createElement("p",null,a.createElement(s.zx,{fill:!0,small:!0,onClick:()=>g({host:"*",path:"/*"},"domainBlackList")},"在所有网站中禁用网页划词"))))}function P(){i().runtime.sendMessage({action:"open panel"}).then((()=>{window.close()}),(e=>{window.alert("打开独立窗口时发生了一个错误："+(null==e?void 0:e.message))}))}function z(){const[e,t]=(0,a.useState)(!1),[n,r]=(0,a.useState)("");return(0,a.useEffect)((()=>{i().commands.getAll().then((e=>{e.some((e=>{if("panel"===e.name)return r(e.shortcut||""),!0}))}))}),[]),a.createElement("div",{style:{padding:"0 8px 8px 8px"}},a.createElement(s.zx,{onClick:()=>{t((e=>!e))},fill:!0,intent:n?"primary":"warning",text:"试一试独立翻译窗口吧",rightIcon:a.createElement(s.JO,{icon:n?e?"chevron-up":"chevron-down":"error",iconSize:12}),minimal:!0,small:!0}),a.createElement(s.UO,{isOpen:e},a.createElement("p",{className:"bp3-text-muted"},"您的浏览器支持全局快捷键！您可以在浏览器以外的地方按下快捷键",n&&a.createElement(a.Fragment,null," ",a.createElement("kbd",null,n)," "),"来翻译剪切板内的文本，无需切换回您的浏览器。"),n&&a.createElement("div",{className:"bp3-text-muted"},"您可以在",a.createElement("a",{href:N,target:"_blank",rel:"noreferrer"},"设置"),"中修改独立翻译窗口的快捷键。"),!n&&a.createElement(s.UW,{title:"未设置独立窗口快捷键",intent:"warning"},"快捷键已被占用或清除，请前往",a.createElement("a",{href:N,target:"_blank",rel:"noreferrer"},"设置"),"中为独立窗口分配一个快捷键，并将作用域由“在 ",R," ","中”改为“全局”。")))}const M=(0,o.Z)(m.q,["autoClipboard"]);r.render(a.createElement((function(){const e=(0,a.useRef)(null),[t,n]=(0,d.Z)(M);(0,g.Z)();const r=(0,a.useCallback)((t=>{var n;t&&(null===(n=e.current)||void 0===n||n.translate(t,!0))}),[]);return(0,a.useEffect)((()=>{var t;null===(t=e.current)||void 0===t||t.select()}),[]),a.createElement("div",null,a.createElement(S,null),a.createElement(s.iz,null),a.createElement(L.O,{onTranslate:r,onDismiss:()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.select()}}),a.createElement(b.Z,{ref:e,toaster:y,extendOptions:a.createElement(s.XZ,{label:"自动读取剪切板内的文本",checked:!!(null==t?void 0:t.autoClipboard),indeterminate:null===(null==t?void 0:t.autoClipboard),onChange:e=>{n({autoClipboard:e.target.checked})}}),showTextArea:!0}),a.createElement(s.iz,null),a.createElement("div",{className:"openBtn"},a.createElement(O,null),a.createElement(s.zx,{small:!0,onClick:()=>{i().runtime.sendMessage({action:"open pdf viewer"}).then((()=>{window.close()}))}},"内置 PDF 阅读器"),a.createElement(s.zx,{small:!0,onClick:P},"独立翻译窗口")),a.createElement(s.iz,null),w.XO&&a.createElement(z,null))}),null),document.getElementById("app"))}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var l=n[e]={exports:{}};return t[e].call(l.exports,l,l.exports,a),l.exports}a.m=t,e=[],a.O=(t,n,r,l)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,r,l]=e[u],o=!0,c=0;c<n.length;c++)(!1&l||i>=l)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(o=!1,l<i&&(i=l));if(o){e.splice(u--,1);var s=r();void 0!==s&&(t=s)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,r,l]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={35:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,l,[i,o,c]=n,s=0;if(i.some((t=>0!==e[t]))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(c)var u=c(a)}for(t&&t(n);s<i.length;s++)l=i[s],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[473,150,875,675,697,969,141,99,125,915],(()=>a(3230)));r=a.O(r)})();