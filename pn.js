(()=>{"use strict";var e,t={451:(e,t,n)=>{n.d(t,{iNe:()=>p,Pyr:()=>g,rr$:()=>E,ur0:()=>w,KtJ:()=>h,znr:()=>b,lnC:()=>y,brc:()=>T,IRm:()=>L,QhV:()=>O,oUC:()=>x,HC1:()=>R,yZ9:()=>C,gSV:()=>S,ZOf:()=>A,J4_:()=>P,Csj:()=>k,cO4:()=>N,GjQ:()=>F,T5o:()=>I,IYJ:()=>H,q01:()=>U,ZoI:()=>Z,tsZ:()=>D,ILo:()=>j,EpL:()=>M,RfN:()=>G,TUJ:()=>W,scP:()=>B,yW8:()=>Y,Eye:()=>_,AFY:()=>z,H$A:()=>J,ntJ:()=>q,rtP:()=>K,O4S:()=>V,hPX:()=>X,RP2:()=>Q,cPG:()=>$,jxF:()=>ee,p5I:()=>te,eHu:()=>ne,BgB:()=>re,HcK:()=>oe,YuG:()=>ae,ySA:()=>ie,NdO:()=>se,M4x:()=>le,KZz:()=>ce,U4W:()=>ue,GPh:()=>de,skh:()=>fe,URx:()=>pe,Bzc:()=>ve,P1s:()=>me,GdN:()=>ge,RjW:()=>Ee,Ysf:()=>we,QX7:()=>he,v8x:()=>be,XaB:()=>ye,G07:()=>Te,mCh:()=>Le,_4w:()=>Oe,iEm:()=>xe,nvt:()=>Re,bkT:()=>Ce,Cr2:()=>Se,D2c:()=>Ae,mHA:()=>Pe,u$T:()=>ke,YHb:()=>Ne,oPt:()=>Fe,Hpx:()=>Ie,ZA9:()=>He,WLz:()=>Ue,abV:()=>Ze,TwV:()=>De,EOg:()=>je,YbB:()=>Me,aSe:()=>Ge,KrR:()=>We,cDM:()=>Be,Lf7:()=>Ye,qEr:()=>_e,otd:()=>ze,KpW:()=>Je,cHF:()=>qe,LiQ:()=>Ke,Wmm:()=>Ve,wGP:()=>Xe,Fcr:()=>Qe,_Kv:()=>$e,sfD:()=>et,NL3:()=>tt});var r,o,a,i,s=n(1229),l=n(762),c=n(2609),u=n(3766),d=n(4155),f="bp3";void 0!==d&&(f=null!==(i=null!==(o=null===(r=d.env)||void 0===r?void 0:r.BLUEPRINT_NAMESPACE)&&void 0!==o?o:null===(a=d.env)||void 0===a?void 0:a.REACT_APP_BLUEPRINT_NAMESPACE)&&void 0!==i?i:f);var p=f+"-active",v=f+"-align-left",m=f+"-align-right",g=f+"-dark",E=f+"-disabled",w=f+"-fill",h=f+"-inline",b=f+"-interactive",y=f+"-large",T=f+"-loading",L=f+"-minimal",O=f+"-outlined",x=f+"-round",R=f+"-small",C=f+"-vertical",S=(nt(u.Ly.TOP),nt(u.Ly.BOTTOM),nt(u.Ly.LEFT),nt(u.Ly.RIGHT),$e(l.u.ZERO),$e(l.u.ONE),$e(l.u.TWO),$e(l.u.THREE),$e(l.u.FOUR),tt(c.S.PRIMARY)),A=(tt(c.S.SUCCESS),tt(c.S.WARNING),tt(c.S.DANGER),f+"-focus-disabled"),P=f+"-text-overflow-ellipsis",k=f+"-blockquote",N=f+"-code",F=f+"-code-block",I=f+"-heading",H=f+"-list",U=f+"-button",Z=U+"-group",D=U+"-spinner",j=U+"-text",M=f+"-callout",G=M+"-icon",W=f+"-card",B=f+"-collapse",Y=B+"-body",_=f+"-dialog",z=_+"-container",J=_+"-close-button",q=_+"-header",K=f+"-html-select",V=f+"-input",X=V+"-group",Q=V+"-left-container",$=V+"-action",ee=f+"-control",te=ee+"-indicator",ne=te+"-child",re=f+"-checkbox",oe=f+"-radio",ae=f+"-switch",ie=ae+"-inner-text",se=f+"-file-input",le=f+"-file-input-has-selection",ce=f+"-file-upload-input",ue=f+"-file-upload-input-custom-text",de=f+"-label",fe=f+"-menu",pe=fe+"-item",ve=pe+"-label",me=f+"-submenu",ge=fe+"-divider",Ee=fe+"-header",we=f+"-non-ideal-state",he=we+"-visual",be=f+"-overlay",ye=be+"-backdrop",Te=be+"-content",Le=be+"-inline",Oe=be+"-open",xe=be+"-scroll-container",Re=be+"-start-focus-trap",Ce=be+"-end-focus-trap",Se=f+"-popover",Ae=Se+"-arrow",Pe=Se+"-backdrop",ke=Se+"-capturing-dismiss",Ne=Se+"-content",Fe=Se+"-dismiss",Ie=Fe+"-override",He=Se+"-open",Ue=Se+"-out-of-boundaries",Ze=Se+"-target",De=Se+"-wrapper",je=f+"-transition-container",Me=f+"-portal",Ge=f+"-spinner",We=Ge+"-animation",Be=Ge+"-head",Ye=f+"-no-spin",_e=Ge+"-track",ze=f+"-toast",Je=ze+"-container",qe=ze+"-message",Ke=f+"-tooltip",Ve=f+"-icon";function Xe(){return f}function Qe(e){switch(e){case s.v.LEFT:return v;case s.v.RIGHT:return m;default:return}}function $e(e){if(void 0!==e)return f+"-elevation-"+e}function et(e){if(null!=e)return 0===e.indexOf(f+"-icon-")?e:f+"-icon-"+e}function tt(e){if(null!=e&&e!==c.S.NONE)return f+"-intent-"+e.toLowerCase()}function nt(e){if(void 0!==e)return f+"-position-"+e}},8587:(e,t,n)=>{n.d(t,{H4:()=>c,H5:()=>u,H6:()=>d,OL:()=>f});var r=n(2100),o=n(4184),a=n.n(o),i=n(7294),s=n(451);function l(e,t){return function(n){var o=n.className,s=n.elementRef,l=(0,r._T)(n,["className","elementRef"]);return i.createElement(e,(0,r.pi)((0,r.pi)({},l),{className:a()(t,o),ref:s}))}}l("h1",s.T5o),l("h2",s.T5o),l("h3",s.T5o);var c=l("h4",s.T5o),u=l("h5",s.T5o),d=l("h6",s.T5o),f=(l("blockquote",s.Csj),l("code",s.cO4),l("pre",s.GjQ),l("label",s.GPh),l("ol",s.IYJ));l("ul",s.IYJ)},966:(e,t,n)=>{n.d(t,{AN:()=>r.A,zx:()=>r.z,UW:()=>o.U,Zb:()=>a.Z,UO:()=>i.U,Vq:()=>s.V,XZ:()=>l.XZ,Y8:()=>l.Y8,S2:()=>c.S,BZ:()=>u.B,Ee:()=>d.E,Kx:()=>f.K,H5:()=>p.H5,H6:()=>p.H6,OL:()=>p.OL,Lu:()=>v.L,JO:()=>m.I,v2:()=>g.v,sN:()=>E.s,tR:()=>w.t,aV:()=>h.a,J2:()=>b.J,x7:()=>y.x,u:()=>T.u});n(2435);var r=n(4366),o=n(8074),a=n(4971),i=n(1009),s=n(9685),l=n(312),c=n(696),u=n(8718),d=n(1859),f=n(9161),p=n(8587),v=n(8845),m=n(1679),g=n(2771),E=n(294),w=n(7535),h=n(4247),b=n(5185),y=n(7571),T=n(362)},985:(e,t,n)=>{n.d(t,{eE:()=>i,vU:()=>s});var r=n(3150),o=n.n(r);const a=window.navigator.userAgent,i=a.includes("Mac"),s=(a.includes("Chrome"),a.includes("Edg"),a.includes("Firefox"));function l(e){return e.split(".").map((e=>Number(e)))}l(o().runtime.getManifest().version)},2099:()=>{window.navigator.userAgent.includes("Firefox")&&(window.requestAnimationFrame=window.requestAnimationFrame.bind(window),window.cancelAnimationFrame=window.cancelAnimationFrame.bind(window))},9611:(e,t,n)=>{var r=n(3150),o=n.n(r),a=n(7294),i=n(3935),s=n(5744),l=n(966),c=n(4648),u=n(7643),d=n(1515),f=n(9970),p=n(1922),v=n(7290);var m=n(9669),g=n.n(m);function E(e){return e.target.matches(".bp3-overlay-backdrop")}function w(e){return new Promise(((t,n)=>{const r=new FileReader;r.addEventListener("load",(()=>{t(r.result)})),r.addEventListener("error",(()=>{n(r.error)})),r.readAsDataURL(e)}))}function h(e){const{toaster:t,onDrop:n}=e,r=function(e,t,n){const[r,o]=(0,a.useState)(!1),i=(0,a.useRef)(t);(0,a.useEffect)((()=>{i.current=t}),[t]);const s=(0,a.useRef)(n);return(0,a.useEffect)((()=>{s.current=n}),[n]),(0,a.useEffect)((()=>{if(!e)return;const t=function(e){e.preventDefault(),o(!0)};return e.addEventListener("dragenter",t),()=>{e.removeEventListener("dragenter",t)}}),[e]),(0,a.useEffect)((()=>{if(!e)return;const t=function(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")};return e.addEventListener("dragover",t),()=>{e.removeEventListener("dragover",t)}}),[e]),(0,a.useEffect)((()=>{if(!e)return;const t=e=>{s.current?s.current(e)&&o(!1):o(!1)};return e.addEventListener("dragleave",t),()=>{e.removeEventListener("dragleave",t)}}),[e]),(0,a.useEffect)((()=>{if(!e)return;const t=function(e){const t=e.dataTransfer;if(!t)return;e.preventDefault(),o(!1);const n=i.current,r=t.types;if(r.includes("Files")){const e=t.files[0];e.type.startsWith("image/")?n({type:"image",data:e}):n(new TypeError("此文件不是图片。"))}else{if(r.includes("text/html")){const e=t.getData("text/html").match(/<img.*?src="([^"]+)"/);if(e){const t=e[1];return void(t.startsWith("data:image/")?n({type:"image-data-uri",data:t}):n({type:"image-url",data:t}))}}if(r.includes("text/plain")){const e=t.getData("text");if(e)return void n({type:"text",data:e})}n(new TypeError("只支持拖放文字或图片。"))}};return e.addEventListener("drop",t),()=>{e.removeEventListener("drop",t)}}),[e]),r}(document.body,(e=>{if(e instanceof TypeError)t.show({intent:"warning",message:e.message});else switch(e.type){case"text":n({type:"text",text:e.data});break;case"image":w(e.data).then((e=>{n({type:"image",dataURI:e})}));break;case"image-data-uri":n({type:"image",dataURI:e.data});break;case"image-url":const r=t.show({message:"正在加载图片……"});g().get(e.data,{responseType:"blob"}).then((e=>(t.dismiss(r),w(e.data)))).then((e=>n({type:"image",dataURI:e}))).catch((e=>{t.dismiss(r),t.show({intent:"danger",message:`发生了一个错误：${(null==e?void 0:e.message)||"未知错误"}`})}))}}),E);return a.createElement(l.aV,{isOpen:r})}const b=(0,d.Z)(f.d,["tipForDropTranslateClosed"]);function y(){const[e,t]=(0,p.Z)(b);return!e||e.tipForDropTranslateClosed?null:a.createElement(l.UW,{intent:"primary",style:{marginBottom:10}},"你可以将文本或图片拖放到独立翻译窗口当中。",a.createElement("a",{onClick:()=>{t({tipForDropTranslateClosed:!0})}},"不再提示"))}s.$.onlyShowFocusOnTabs();const T=(0,d.Z)(f.q,["panelSize","autoClipboard"]),L=l.x7.create();function O(){const e=(0,a.useRef)(null),[t,n]=(0,p.Z)(T),[r,i]=(0,a.useState)(!1);function s(t){e.current&&(t?e.current.translate({type:"text",text:t},!0):(i(!1),setTimeout((()=>{i(!0)}))))}(0,u.Z)(),(0,a.useEffect)((()=>{s(decodeURIComponent(window.location.search.slice(6)))}),[]),(0,a.useEffect)((()=>{var t;null===(t=e.current)||void 0===t||t.select()}),[]),(0,a.useEffect)((()=>{const e=e=>{if("translateInPopup"===e.action)s(e.data)};return o().runtime.onMessage.addListener(e),()=>{o().runtime.onMessage.removeListener(e)}}),[]);const d=(0,a.useCallback)((t=>{var n;t&&(null===(n=e.current)||void 0===n||n.translate(t,!0))}),[]);return a.createElement(a.Fragment,null,a.createElement(h,{onDrop:t=>{var n;null===(n=e.current)||void 0===n||n.translate(t)},toaster:L}),a.createElement(y,null),r&&a.createElement(v.O,{onTranslate:d,onDismiss:()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.select()}}),a.createElement(c.Z,{ref:e,toaster:L,showTextArea:!0,size:(null==t?void 0:t.panelSize)||T.panelSize,extendOptions:a.createElement(l.XZ,{label:"自动读取剪切板内的文本",checked:!!(null==t?void 0:t.autoClipboard),indeterminate:null===(null==t?void 0:t.autoClipboard),onChange:e=>{n({autoClipboard:e.target.checked})}})}))}window.addEventListener("DOMContentLoaded",(()=>{i.render(a.createElement(O,null),document.getElementById("app"))})),window.addEventListener("beforeunload",(()=>{o().storage.local.set({panelPos:{top:window.screenY,left:window.screenX,width:window.outerWidth,height:window.outerHeight}})}));let x=!1;window.addEventListener("compositionstart",(()=>{x=!0})),window.addEventListener("compositionend",(()=>{x=!1})),window.addEventListener("keyup",(e=>{if(27===e.keyCode){if("TEXTAREA"==e.target.nodeName&&x)return;window.close()}}))}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,o,a]=e[u],s=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={901:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(l)var u=l(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.O(void 0,[473,150,875,675,697,969,141,99,125,915],(()=>r(2099)));var o=r.O(void 0,[473,150,875,675,697,969,141,99,125,915],(()=>r(9611)));o=r.O(o)})();