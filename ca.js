(()=>{var e,t={1354:function(e,t,n){var o;e.exports=(o=n(8249),n(4938),n(4433),n(298),n(8269),n(3786),n(8214),n(2783),n(2153),n(7792),n(34),n(7460),n(3327),n(706),n(9824),n(2112),n(888),n(5109),n(8568),n(4242),n(9968),n(7660),n(1148),n(3615),n(2807),n(1077),n(6475),n(6991),n(2209),n(452),n(4253),n(1857),n(4454),n(3974),o)},9966:(e,t,n)=>{"use strict";n.d(t,{$o:()=>l});var o=n(124),r=n(3326),s=n(3150),a=n.n(s),i=n(3417);const l=!0,c={id:"bdocr",name:"百度文字识别",points:!0,secretKeys:{get:()=>a().storage.local.get({baiDuOCRKey:[]}).then((({baiDuOCRKey:e})=>(Array.isArray(e)?e:[e]).map((e=>({id:e.key,key:e.secret}))))),set:e=>a().storage.local.set({baiDuOCRKey:e.map((e=>({key:e.id,secret:e.key})))}),isComplete:e=>(0,i.dz)(e,["id"])},pointsEnable:{get:()=>a().storage.local.get({bdOcrPoints:l}).then((({bdOcrPoints:e})=>e)),set:e=>a().storage.local.set({bdOcrPoints:e})}};class u extends o.E{constructor(){super(c,!0)}callBySecretKey(e,t){return new r.w(e).ocr(t.image)}transform(e){if(!e.paragraphs_result)throw new Error("百度文字识别服务配置有误，请确认你领取过免费资源包，且密钥填写无误。");return e.paragraphs_result.reduce(((t,{words_result_idx:n})=>(t.push(n.reduce(((t,n)=>t+e.words_result[n].words),"")),t)),[]).join("\n")}}new u},9784:(e,t,n)=>{"use strict";n.d(t,{L:()=>p});var o=n(6383),r=n(6504),s=n(6806),a=n(9866),i=n(9071),l=n(220),c=n(8209),u=n(4866),d=n(6041);const p=[c.w,u.EH,r.pe,r.gG,i.ym,s.Xi,o.Wx,o.Il,l.Rw,d.L,a.r].filter((e=>e!==d.L))},7255:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(9111);const r=document.caretPositionFromPoint?function(e,t){const n=document.caretPositionFromPoint(e,t);return n&&{offsetNode:n.offsetNode,offset:n.offset}}:document.caretRangeFromPoint?function(e,t){const n=document.caretRangeFromPoint(e,t);return n&&{offsetNode:n.startContainer,offset:n.startOffset}}:void 0;class s{constructor(e,t=1e3,n,s=document.body){this.destroyed=!1,this.context=s,this.onMouseMove=(0,o.Z)((t=>{n&&!t[n]||(!function(e,t){if(!r)return null;const n=window.getSelection();if(!n)return null;const o=r(e,t);if(!o)return null;const{offset:s,offsetNode:a}=o;if(a.nodeType!==Node.TEXT_NODE)return null;const i=n.rangeCount>0?n.getRangeAt(0):void 0;n.removeAllRanges();const l=document.createRange();l.setStart(a,s),l.setEnd(a,s),n.addRange(l),n.modify("move","backward","word"),n.modify("extend","forward","word");const c=n.getRangeAt(0).getBoundingClientRect();(c.left>e||c.left+c.width<e||c.top>t||c.top+c.height<t)&&(n.removeAllRanges(),i&&n.addRange(i))}(t.clientX,t.clientY),e(t))}),t),s.addEventListener("pointermove",this.onMouseMove)}destroy(){this.destroyed=!0,this.context.removeEventListener("pointermove",this.onMouseMove)}}},2852:(e,t,n)=>{"use strict";n.d(t,{dD:()=>i});var o=n(985),r=n(1227);const s=n.n(r)()("hotkeys"),a=(o.eE,{ctrl:o.eE?o.vU?[224]:[91,93]:[17],alt:[18],shift:[16]});function i(e,t,n,o){const r=new Set;let i=!1;function l(){r.clear(),i?(i=!1,s("辅助键处于激活状态，执行中断回调"),o()):s("辅助键未处于激活状态")}function c(){s("页面失去了焦点，执行中断操作"),l()}function u(n){const o=n.keyCode,c=r.size;if(!e.some((e=>{if(a[e].includes(o))return r.add(e),!0})))return s("按下了不是辅助键的其它键，执行中断操作"),void l();c!==r.size&&(s("按下了新的辅助键，当前已经按下的辅助键：",[...r]),r.size===e.length&&(s("全部辅助键已按下，将辅助键改为激活状态，并执行辅助键按下回调"),i=!0,t()))}function d(t){const o=t.keyCode,l=r.size;if(!l)return;e.some((e=>{if(a[e].includes(o))return r.delete(e),!0}))&&l!==r.size&&(s("松开了新的辅助键，当前已经按下的辅助键：",[...r]),i=!1,e.length-r.size==1&&(s("一个辅助键已松开，执行辅助键松开回调"),n()))}return window.addEventListener("keydown",u),window.addEventListener("blur",c),window.addEventListener("keyup",d),()=>{window.removeEventListener("keydown",u),window.removeEventListener("blur",c),window.removeEventListener("keyup",d)}}},985:(e,t,n)=>{"use strict";n.d(t,{eE:()=>a,vU:()=>i});var o=n(3150),r=n.n(o);const s=window.navigator.userAgent,a=s.includes("Mac"),i=(s.includes("Chrome"),s.includes("Edg"),s.includes("Firefox"));function l(e){return e.split(".").map((e=>Number(e)))}l(r().runtime.getManifest().version)},9970:(e,t,n)=>{"use strict";n.d(t,{q:()=>f});var o=n(4001),r=n(9784),s=n(7354),a=n(220),i=n(6383),l=n(6806),c=n(6504),u=n(9966),d=n(9071),p=n(4866);const f={button:!0,buttonAutoClose:!0,buttonOffsetTop:0,buttonOffsetLeft:0,charsLimit:0,disableInTextarea:!1,domainBlackList:[],domainWhiteList:[],textList:[{name:"忽略中文",readonly:!0,enabled:!1,value:"[\\u4e00-\\u9fa5]",description:"如果划选的文本当中包含中文，则不显示翻译按钮或翻译结果。"},{name:"忽略字符",readonly:!0,enabled:!0,value:"^[\\s.\\-0-9()•+]+$",description:"如果划选的文本全部都是由数字、点、括号、空格、横线、加号和圆点（即 •，多用于密码框）组成的，则不显示翻译按钮或翻译结果。"}],placement:"bottom",pin:!1,pinAfterDrag:!1,pinPos:null,pinIgnoreDomainList:!0,darkMode:"system",pdfAuto:!1,pdfSnifferEnable:!0,pdfStandalone:!1,width:250,source:"",destination:"中文(简体)",secondDestination:"英语",secondDestinationLatestSource:!1,showTextArea:!1,textAreaAuto:!1,textAreaShortKey:"enter",selectedAPIs:["GoogleWeb","DeepLWeb","BingDictWeb"],collapsedAPIs:[],selectedExternalLinks:[],autoClipboard:null,autoClipboardImage:null,autoPlay:!1,autoCopy:!1,autoPaste:!0,recentUseLangFrom:[""],recentUseLangTo:["中文(简体)"],tipPanelSettingsClosed:!1,tipBlockedPDFClosed:!1,tipIncognitoPDFClosed:!1,tipOcrChangeClosed:!0,tipForeverVIPClosed:!0,tipQuickLinksClosed:!1,tipNewProfessionalClosed:!1,tipTextareaBtnClosed:!0,tipForSTTClosed:!1,tipForPinAfterDragClosed:!0,tipForPageTrsNoLoadingClosed:!0,tipForSlowDeepLPageTrsClosed:!1,tipForPageTrsClosed:!1,panelPos:{width:270,height:500,left:100,top:100},panelSize:"small",panelButtons:["media","microphone"],panelCustomStyle:"",notifySyncOptions:!0,sourceTransformNoBr:!1,sourceTransformNCaml:!1,sourceTransformNoComment:!1,sourceTransformRegExps:[],historyEnabled:!1,favoritesEnabled:!0,modifierKeys:[],modifierKeyPressedAction:"",modifierKeyTranslate:!1,modifierKeyLink:!1,audioVolume:100,audioRate:1,systemTTS:"aid",systemTTSAccent:{},systemTTSVoice:{},localOCR:{lang:"eng"},pageTrsApi:"GoogleWeb",pageTrsHighlight:!0,pageTrsApiOptions:r.L.map((e=>e.id)),pageTrsJumpTwo:!1,pageTrsEditable:!0,googleRegion:"cn",googleType:"fast",quickLinks:[{name:"谷歌搜索",link:"https://www.google.com/search?q=%s",menu:!0,panel:!0},{name:"维基百科",link:"https://zh.wikipedia.org/w/index.php?search=%s",menu:!0,panel:!0},{name:"剑桥词典",link:"https://dictionary.cambridge.org/dictionary/english-chinese-simplified/%s",menu:!0,panel:!0}],noticesRead:[],customAPI:"",customAPINames:[],pointsEnabled:[],baiduDomain:null,aliDomain:null,ocrService:"tesseractocr",contextMenus:s.n,popupAction:"show-popup"};o.U.both,p.VY,c.Fi,c.ZX,u.$o,a.eT,i.Kl,i.YU,d.xu,l.HK},3644:(e,t,n)=>{"use strict";var o=n(6072),r=n(1227),s=n.n(r),a=n(4873),i=n(8325),l=n(9203),c=n(9111);function u(e,t,n=document){return(0,i.e)((()=>{const o=n.querySelector(e);if(!o)throw new Error(t||"找不到元素："+e);return o}))}async function d(e,t){let n;(await u(`[dl-test="translator-${e}-lang-btn"]`,`找不到切换 ${e} 语种的按钮。`)).click();try{n=await u(`[dl-test="translator-${e}-lang-list"]`,`找不到${e}的语种下拉框。`)}catch(t){if("target"!==e)throw t;n=await u('[dl-test="translator-source-lang-list"]',`找不到${e}的语种下拉框。`)}(await u(`[dl-test="translator-lang-option-${t}"]`,`在${e}语种选择下拉框中找不到语种${t}的选项。`,n)).click()}async function p(e,t,n="auto"){var o;await async function(){if((await u('[dl-test="translator-source-input"]',"找不到文本输入框。")).value){(await u('[dl-test="translator-source-clear-button"]',"找不到清空文本的按钮。")).click()}}(),await(o=n,d("source",o)),await function(e){return d("target","en"===e?"en-US":`${e}-${e.toUpperCase()}`)}(t),await async function(e){const t=await u('[dl-test="translator-source-input"]',"找不到文本输入框。");t.value=e,t.dispatchEvent(new Event("input"))}(e)}const f=s()("deepLInFrame");var m=n(6355);!function(){var e;if("https://www.deepl.com/translator"!==window.location.href||window.top===window)return;const t=new MessageChannel,n=t.port1;n.onmessage=async e=>{const t=(0,a.E)(e.data);if(t){f("收到背景页传过来的翻译消息：",t);try{await p(t.text,t.to,t.from)}catch(e){f("翻译时报错了：",e.message),n.postMessage((0,a.b)({error:e.message}))}}},function(e){const t=new MutationObserver((0,c.Z)((function(){const t=Array.from(document.querySelectorAll(".lmt__translations_as_text__item")).map((e=>(e.getElementsByClassName("lmt__translations_as_text__text_btn")[0].textContent||"").trim())).filter(l.Z);t.length&&e({result:t.shift(),otherResults:t})}),500));t.observe(document.getElementsByClassName("lmt__translations_as_text")[0],{childList:!0})}((e=>{f("监测到翻译结果区域变化，传给背景页当前结果的消息体：",e),n.postMessage((0,a.b)({data:e}))})),null===(e=window.top)||void 0===e||e.postMessage("greetings from hcfy:ready","*",[t.port2])}(),m.j||new o.U},7354:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});const o=[{value:"translate",label:"翻译这段文本"},{value:"open-pdf-in-viewer",label:"在划词翻译中打开此 PDF（PDF 文件）"},{value:"open-link-in-viewer",label:"在划词翻译中打开此 PDF（PDF 链接）"},{value:"screen-translate",label:"截图翻译"},{value:"page-translate",label:"网页全文翻译"},{value:"video-translate",label:"音视频翻译"}].map((e=>e.value))},4194:(e,t,n)=>{"use strict";n.d(t,{mD:()=>o.m,RE:()=>r.R});var o=n(5127),r=(n(9989),n(3364))},3364:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var o=n(9669),r=n.n(o),s=n(5127),a=n(9989);const i={401:"登录状态已失效，请重新登录。"};function l(e){if(r().isAxiosError(e)){const t=function(e){var t;const{url:n,baseURL:o}=e;let r;try{r=new URL(n||"",o)}catch(e){return"远程服务器"}const{host:s}=r;return(null===(t="https://hs-api.limingkai.cn/")?void 0:t.includes(s))?"划词翻译服务器":"远程服务器"}(e.config),n="划词翻译服务器"===t;if(e.response){const o=e.response.status;return new s.m(n?i[o]||`划词翻译服务器内部产生了一个错误，请稍后重试。HTTP 响应码：${o}。`:`${t}返回了错误的 HTTP 响应码：${o}。`,{type:"API_SERVER_ERROR"})}return e.request?new s.m(`${t}没有响应。`,{type:"NETWORK_ERROR",link:{name:"查看解决方案",url:"划词翻译服务器"===t?"https://hcfy.app/docs/faq/#server-no-response":"https://hcfy.app/docs/faq/#why-services-always-loading"}}):new s.m(`向${t}发起请求时发生了一个错误：“${e.message}”`,{type:null})}return(0,a.D)(e)}},4001:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var o;n(7856);!function(e){e.both="both",e.source="source",e.result="result"}(o||(o={}))},8325:(e,t,n)=>{"use strict";n.d(t,{X:()=>r,e:()=>s});const o={delay:0,count:2,beforeRetry:()=>!1};function r(e,t){const n=t?Object.assign({},o,t):o;if(n.count<=0)return e();let r=0;const s=()=>e().catch((e=>r<n.count&&(r+=1,!n.beforeRetry(e))?new Promise(((e,t)=>{setTimeout((()=>{s().then(e,t)}),n.delay)})):Promise.reject(e)));return s()}function s(e,t){return r((()=>new Promise(((t,n)=>{try{t(e())}catch(e){n(e)}}))),t)}},5084:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(520);const r=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const s=function(e){return this.__data__.has(e)};function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new o.Z;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=r,a.prototype.has=s;const i=a},9548:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=function(e,t){return e.has(t)}},576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(9122);const r=function(e,t){return(0,o.Z)(e,t)}},935:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return t[e].call(s.exports,s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,n,r,s)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,s]=e[u],i=!0,l=0;l<n.length;l++)(!1&s||a>=s)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(i=!1,s<a&&(a=s));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,r,s]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={537:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,s,[a,i,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var u=l(o)}for(t&&t(n);c<a.length;c++)s=a[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[473,150,611,697,969,692],(()=>o(3644)));r=o.O(r)})();